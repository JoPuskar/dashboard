{% load static %}
{% load staticfiles %}
{% load twitter_tags %}
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"  lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
		<link rel="stylesheet" href="{% static 'assets/css/style.css' %}"/>
        <script src="{% static 'assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js' %}"></script>
        <style>

            #map{
                width:100%;
                height:100%;
            }

            .info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .info h4 { margin: 0 0 5px; color: #777; }
            .legend { text-align: left; line-height: 18px; color: #555; } .legend i { width: 18px; height: 18px; float: left; margin-right: 8px; opacity: 0.7; }

        </style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.0&appId=171643386807909&autoLogAppEvents=1';
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

        <div class="bg-gray module-padding">
            <div class="container">
                <div class="module-story">
                    <div class="story-header">
                        <h5>Recent Stories</h5>
                        <a href="#" title="">View All Stories</a> </div>
                    <div class="story-section padding-top">
                        <div class="story-list">{% for story in recent_story%}
                            <div>
                                <div class="story-item">
                                    <!--<img src="{{ MEDIA_URL }}{{ story.picture }}" alt="">-->
                                    <img src="{% static 'assets/img/kulbahadur.png' %}" alt="">
                                    <div class="user-info">
                                        <h6>{{ story.name }}</h6>
                                        <span>{{ story.address }}</span>
                                    </div>
                                    <p>
                                        {{story.description|truncatechars:150}}<a href="{% url 'visualizations:recent_story_detail' story.pk %}" title="">read more [+]</a>
                                    </p>
                                </div>
                            </div>{% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white module-padding">
            <div class="container">
                <div class="stat-wrap">
                    <div class="stat-head">
                        <h4><strong>Government of India Support to Nepal Housing Reconstruction Program</strong></h4>
                        <div class="progress-label">&#8377; 23,589,341 Disbursed</div>
                        <div class="progress" style="height: 20px;">
                          <div class="progress-bar bg-primary-gradient" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="stat-body bg-gray padding-large margin-top-large">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="chart-wrap">
                                    <h5><strong>Housing Completion</strong></h5>
                                    <canvas id="housingChart"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="chart-wrap">
                                    <h5><strong>Reconstruction Grants Received</strong></h5><canvas id="reconstructionGrantsReceivedChart"></canvas>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="bg-gray module-padding">
            <div class="container">
                <form>
                    <div class="row">
                        <div class="col-md-5 col-lg-4">
                            <div class="form-group">
                                <label>District Selected</label>
                                <select class="form-control inputDistrictClass" id="inputDistrict">
                                  <option> All </option>
                                  <option id = "gorkha">Gorkha</option>
                                  <option id = "nuwakot">Nuwakot</option>
                                </select>
                              </div>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-md-7">
                        <div id="map"></div>
                    </div>
                    <div class="col-md-5">
                        <div class="map-popup">
                            <div class="pop-head">
                                Tarkeshwar Gaunpalika
                            </div>
                            <div class="pop-body">
                                <div class="pop-info-item">
                                    <div class="count">265</div>
                                    Houses Completed
                                </div>
                                <div class="row no-gutters">
                                    <div class="col">
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Houses in Stage - I
                                        </div>
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Houses in Stage - II
                                        </div>
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Houses in Stage - III
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Received Tranche - I
                                        </div>
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Received Tranche - II
                                        </div>
                                        <div class="pop-info-item bg-light">
                                            <div class="count">300</div>
                                            Received Tranche - III
                                        </div>
                                    </div>
                                </div>
                                <div class="row no-gutters">
                                    <div class="col">
                                        <div class="pop-info-item">
                                            <div class="count">60%</div>
                                            Rural
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="pop-info-item">
                                            <div class="count">55%</div>
                                            Female headed HHs
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white module-padding">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <div class="social-wrap">
                            <div class="fb-page" data-href="https://www.facebook.com/naxa.np" data-tabs="timeline" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/naxa.np" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/naxa.np">Naxa Pvt. Ltd.</a></blockquote></div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="block social-block social-twitter" style="overflow-y:scroll; height:500px">
                                    <h1>Twitter</h1>
                                    <ul >
                                        {% for tweet in tweets %}
                                        <li >
                                            <div class="tweet-meta" >
                                                <a href="https://www.twitter.com/{{ tweet.user.screen_name }}/status/{{ tweet.id }}" target="_blank">
                                                    <img src="{{ tweet.user.profile_image_url }}" width="32" height="32" />
                                                    <h2>{{ tweet.user.name }}<br /></h2>
                                                    <span>@{{ tweet.user.screen_name }} &middot; {{ tweet.created_at|twitter_date }}</span>
                                                </a>
                                            </div>
                                            <p>{{ tweet|expand_tweet_urls|urlize_tweet_text|safe }}</p>
                                        </li>
                                        {% endfor %}

                                    </ul>
                                </div>
                    </div>
                </div>
            </div>
        </div>


        <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-3.2.1.min.js"><\/script>')</script>-->
        <script>window.jQuery || document.write('<script src="{% static 'assets/js/vendor/jquery-1.11.2.min.js' %}"><\/script>')</script>
		<script src="{% static 'assets/js/vendor/popper.min.js' %}"></script>
        <script src="{% static 'assets/js/vendor/bootstrap.min.js' %}"></script>
        <script src="{% static 'assets/js/vendor/slick.min.js' %}"><script>
        <script src="{% static 'assets/js/vendor/Chart.bundle.js' %}"></script>
            <script src="{% static 'assets/js/vendor/Chart.min.js' %}"></script>
            <script src="{% static 'assets/js/plugins.js' %}"></script>
            <script>
            console.log("Top ")
            var district_json = "{{ district_json_path }}";
            var gorkha_json = "{{ gorkha_json_path }}";
            var nuwakot_json = "{{ nuwakot_json_path }}";
            console.log(district_json)
        	$(document).ready(function(){
                $('.story-list').slick({
                  dots: true,
                  infinite: false,
                  speed: 300,
                  slidesToShow: 3,
                  slidesToScroll: 3,
                  responsive: [
                    {
                      breakpoint: 1024,
                      settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        infinite: true,
                        dots: true
                      }
                    },
                    {
                      breakpoint: 600,
                      settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                      }
                    },
                    {
                      breakpoint: 480,
                      settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                      }
                    }
                    // You can unslick at a given breakpoint now by adding:
                    // settings: "unslick"
                    // instead of a settings object
                  ]
                });
        	});


        </script>
            <script>
            var ctx = document.getElementById("housingChart");
            console.log("Chart");
            var myChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: {{housing_label|safe}},
                    datasets: [{
                        label: '# of Votes',
                        data: {{housing_values}},
                        backgroundColor: [
                            '#00628e',
                            '#0181b8',
                            '#019cde',
                            '#04b4ff'
                        ],
                        borderColor: [
                            '#00628e',
                            '#0181b8',
                            '#019cde',
                            '#04b4ff'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    legend: {
                        position: 'right',
                        labels:{
                            fontSize: 14,
                            fontFamily: "-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'",
                            padding: 20,
                        }
                    }
                }
            });

            var ctx = document.getElementById("reconstructionGrantsReceivedChart");
            var myChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: {{reconstruction_label|safe}},
                    datasets: [{
                        label: '# of Votes',
                        data: {{reconstruction_values}},
                        backgroundColor: [
                            '#00628e',
                            '#0181b8',
                            '#019cde'
                        ],
                        borderColor: [
                            '#00628e',
                            '#0181b8',
                            '#019cde'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    legend: {
                        position: 'right',
                        labels:{
                            fontSize: 14,
                            fontFamily: "-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'",
                            padding: 20,
                        }
                    }
                }
            });



        </script>


            <!--map js css-->
            <link rel="stylesheet" href="{% static 'css/leaflet.css' %}"/>

            <script type="text/javascript" src="{% static 'js/leaflet.js' %}"></script>
            <!--<script type="text/javascript" src="./js/jquery.min.js"></script>-->
            <script type="text/javascript" src="{% static 'js/leaflet.label.js' %}"></script>
            <script src="http://d3js.org/topojson.v1.min.js"></script>
            <script src="http://maps.google.com/maps/api/js?v=3&key=AIzaSyC8uXN1u5FYIaGOUnVK90Rh3wR2Gmyw1uU"></script>
            <script type="text/javascript" src="{% static 'js/map.js' %}"></script>
            <!--map js end-->
    </body>
</html>
